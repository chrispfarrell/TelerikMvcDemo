(function(u){var au=u.telerik;au.scripts.push("telerik.editor.js");function I(a7){var a6={};for(var a5=0;a5<a7.length;a5++){a6[a7[a5]]=true}return a6}var aO=I("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(",")),J="div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,li,map,menu,noframes,noscript,object,ol,pre,script,table,tbody,td,tfoot,th,thead,tr,ul".split(","),P=I(J),aE="span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var".split(","),aY=I(aE),O=I("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(","));var g=function(a5){if(a5.nodeType==1){a5.normalize()}};if(u.browser.msie&&parseInt(u.browser.version)>8){g=function(a6){if(a6.nodeType==1&&a6.firstChild){var a5=a6.firstChild,a7=a5;while(a7=a7.nextSibling){if(a7.nodeType==3&&a5.nodeType==3){a7.nodeValue=a5.nodeValue+a7.nodeValue;F.remove(a5)}a5=a7}}}}function q(a5){var a6=0;while(a5=a5.previousSibling){a6++}return a6}function ag(a5){return a5&&a5.nodeValue!==null&&a5.data!==null}function y(a5,a6){try{return !ag(a5)&&(u.contains(a5,ag(a6)?a6.parentNode:a6)||a6.parentNode==a5)}catch(a7){return false}}function B(a6,a5){return y(a6,a5)||a6==a5}function aD(a6,a5){if(y(a6,a5)){while(a5&&a5.parentNode!=a6){a5=a5.parentNode}}return a5}function aJ(a5){return ag(a5)?a5.length:a5.childNodes.length}function ax(a5,a7){var a6=a5.cloneNode(false);a5.deleteData(a7,a5.length);a6.deleteData(0,a7);F.insertAfter(a6,a5)}function D(a6,a7){for(var a8 in a7){var a5=a6[a8];if(a8=="float"){a5=a6[u.support.cssFloat?"cssFloat":"styleFloat"]}if(typeof a5=="object"){if(!D(a5,a7[a8])){return false}}else{if(a5!=a7[a8]){return false}}}return true}var aG=/^\s+$/;var e=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i;var ai=("color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height").split(",");var F={blockParentOrBody:function(a5){return F.parentOfType(a5,J)||a5.ownerDocument.body},normalize:g,toHex:function(a5){var a6=e.exec(a5);if(!a6){return a5}return"#"+u.map(a6.slice(1),function(a7){return a7=parseInt(a7).toString(16),a7.length>1?a7:"0"+a7}).join("")},encode:function(a5){return a5.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g,"&nbsp;")},name:function(a5){return a5.nodeName.toLowerCase()},significantChildNodes:function(a5){return u.grep(a5.childNodes,function(a6){return a6.nodeType!=3||!F.isWhitespace(a6)})},lastTextNode:function(a6){if(a6.nodeType==3){return a6}var a5=null;for(var a7=a6.lastChild;a7;a7=a7.previousSibling){if(a5=F.lastTextNode(a7)){return a5}}return a5},is:function(a5,a6){return F.name(a5)==a6},isMarker:function(a5){return a5.className=="t-marker"},isWhitespace:function(a5){return aG.test(a5.nodeValue)},isBlock:function(a5){return P[F.name(a5)]},isEmpty:function(a5){return aO[F.name(a5)]},isInline:function(a5){return aY[F.name(a5)]},scrollTo:function(a5){a5.ownerDocument.body.scrollTop=u(ag(a5)?a5.parentNode:a5).offset().top},insertAt:function(a6,a5,a7){a6.insertBefore(a5,a6.childNodes[a7]||null)},insertBefore:function(a5,a6){if(a6.parentNode){return a6.parentNode.insertBefore(a5,a6)}else{return a6}},insertAfter:function(a5,a6){return a6.parentNode.insertBefore(a5,a6.nextSibling)},remove:function(a5){a5.parentNode.removeChild(a5)},trim:function(a6){for(var a5=a6.childNodes.length-1;a5>=0;a5--){var a7=a6.childNodes[a5];if(ag(a7)){if(a7.nodeValue.replace(/\ufeff/g,"").length==0){F.remove(a7)}if(F.isWhitespace(a7)){F.insertBefore(a7,a6)}}else{if(a7.className!="t-marker"){F.trim(a7);if(a7.childNodes.length==0&&!F.isEmpty(a7)){F.remove(a7)}}}}return a6},parentOfType:function(a5,a6){do{a5=a5.parentNode}while(a5&&!(F.ofType(a5,a6)));return a5},ofType:function(a5,a6){return u.inArray(F.name(a5),a6)>=0},changeTag:function(a9,a6){var a8=F.create(a9.ownerDocument,a6);var bc=a9.attributes;for(var a7=0;a7<bc.length;a7++){var ba=bc[a7];if(ba.specified){var bb=ba.nodeName;var a5=ba.nodeValue;if(bb=="class"){a8.className=a5}else{if(bb=="style"){a8.style.cssText=a9.style.cssText}else{a8.setAttribute(bb,a5)}}}}while(a9.firstChild){a8.appendChild(a9.firstChild)}F.insertBefore(a8,a9);F.remove(a9);return a8},wrap:function(a5,a6){F.insertBefore(a6,a5);a6.appendChild(a5);return a6},unwrap:function(a5){var a6=a5.parentNode;while(a5.firstChild){a6.insertBefore(a5.firstChild,a5)}a6.removeChild(a5)},create:function(a7,a6,a5){return F.attr(a7.createElement(a6),a5)},attr:function(a5,a6){a6=u.extend({},a6);if(a6&&"style" in a6){F.style(a5,a6.style);delete a6.style}return u.extend(a5,a6)},style:function(a5,a6){u(a5).css(a6||{})},unstyle:function(a6,a5){for(var a7 in a5){if(a7=="float"){a7=u.support.cssFloat?"cssFloat":"styleFloat"}a6.style[a7]=""}if(a6.style.cssText==""){a6.removeAttribute("style")}},inlineStyle:function(a6,a9,ba){var a7=F.create(a6,a9,ba);a6.body.appendChild(a7);var a5=u(a7);var a8=u.map(ai,function(bb){if(u.browser.msie&&bb=="line-height"&&a5.css(bb)=="1px"){return"line-height:1.5"}else{return bb+":"+a5.css(bb)}}).join(";");a5.remove();return a8},commonAncestor:function(){var a8=arguments.length;if(!a8){return null}if(a8==1){return arguments[0]}var a9=[];var ba=Infinity;for(var a5=0;a5<a8;a5++){var bc=[];var bd=arguments[a5];while(bd){bc.push(bd);bd=bd.parentNode}a9.push(bc.reverse());ba=Math.min(ba,bc.length)}if(a8==1){return a9[0][0]}var bb=null;for(a5=0;a5<ba;a5++){var a7=a9[0][a5];for(var a6=1;a6<a8;a6++){if(a7!=a9[a6][a5]){return bb}}bb=a7}return bb}};var t="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),M=/"/g,an=/<br[^>]*>/i,z=/<p><\/p>/i;function E(a7){var ba=[];var a9={"telerik:script":{start:function(bb){ba.push("<script");a6(bb);ba.push(">")},end:function(){ba.push("</script>")}},b:{start:function(){ba.push("<strong>")},end:function(){ba.push("</strong>")}},i:{start:function(){ba.push("<em>")},end:function(){ba.push("</em>")}},u:{start:function(){ba.push('<span style="text-decoration:underline;">')},end:function(){ba.push("</span>")}},font:{start:function(bd){ba.push('<span style="');var bb=bd.getAttribute("color");var bc=t[bd.getAttribute("size")];var be=bd.getAttribute("face");if(bb){ba.push("color:");ba.push(F.toHex(bb));ba.push(";")}if(be){ba.push("font-face:");ba.push(be);ba.push(";")}if(bc){ba.push("font-size:");ba.push(bc);ba.push(";")}ba.push('">')},end:function(bb){ba.push("</span>")}}};function a6(bc){var bj=[],br=bc.attributes,bo=u.trim;if(F.is(bc,"img")){var bu=bc.style.width,bk=bc.style.height,bi=u(bc);if(bu){bi.attr("width",parseInt(bu));F.unstyle(bc,{width:undefined})}if(bk){bi.attr("height",parseInt(bk));F.unstyle(bc,{height:undefined})}}for(var bh=0,bm=br.length;bh<bm;bh++){var bl=br[bh];var be=bl.nodeName;if(bl.specified||(be=="value"&&bc.value!="")||(be=="type"&&bl.nodeValue=="text")){if(be.indexOf("_moz")<0&&be!="complete"){bj.push(bl)}}}if(!bj.length){return}bj.sort(function(bv,bw){return bv.nodeName>bw.nodeName?1:bv.nodeName<bw.nodeName?-1:0});for(var bh=0,bm=bj.length;bh<bm;bh++){var bl=bj[bh];var bt=bl.nodeName;var bn=bl.nodeValue;ba.push(" ");ba.push(bt);ba.push('="');if(bt=="style"){var bf=bo(bn||bc.style.cssText).split(";");for(var bp=0,bg=bf.length;bp<bg;bp++){var bs=bf[bp];if(bs.length){var bq=bs.split(":");var bd=bo(bq[0].toLowerCase()),bb=bo(bq[1]);if(bd=="font-size-adjust"||bd=="font-stretch"){continue}if(bd.indexOf("color")>=0){bb=F.toHex(bb)}if(bd.indexOf("font")>=0){bb=bb.replace(M,"'")}ba.push(bd);ba.push(":");ba.push(bb);ba.push(";")}}}else{if(bt=="src"||bt=="href"){ba.push(bc.getAttribute(bt,2))}else{ba.push(O[bt]?bt:bn)}}ba.push('"')}}function a5(bb,bc){for(var bd=bb.firstChild;bd;bd=bd.nextSibling){a8(bd,bc)}}function a8(be,bf){var bi=be.nodeType;if(bi==1){if(be.attributes._moz_dirty&&F.is(be,"br")){return}var bc=F.name(be);var bg=a9[bc];if(bg){bg.start(be);a5(be);bg.end(be);return}ba.push("<");ba.push(bc);a6(be);if(aO[bc]){ba.push(" />")}else{ba.push(">");a5(be,bf||F.is(be,"pre"));ba.push("</");ba.push(bc);ba.push(">")}}else{if(bi==3){var bb=be.nodeValue;if(!bf&&u.support.leadingWhitespace){var bh=be.parentNode;var bd=(F.isInline(bh)?bh:be).previousSibling;if(!bd||bd.innerHTML==""||F.isBlock(bd)){bb=bb.replace(/^[\r\n\v\f\t ]+/,"")}bb=bb.replace(/ +/," ")}ba.push(F.encode(bb))}else{if(bi==4){ba.push("<![CDATA[");ba.push(be.data);ba.push("]]>")}else{if(bi==8){if(be.data.indexOf("[CDATA[")<0){ba.push("<!--");ba.push(be.data);ba.push("-->")}else{ba.push("<!");ba.push(be.data);ba.push(">")}}}}}}a5(a7);ba=ba.join("");if(ba.replace(an,"").replace(z,"")==""){return""}return ba}var aA=0,at=1,a=2,V=3;function s(a6){var a5=a6.startContainer;return a5.nodeType==9?a5:a5.ownerDocument}function G(a5){if(u.browser.msie){return new ay(a5.document)}return a5.getSelection()}function am(a6){var a5=s(a6);return a3(a5)}function a3(a5){return G(aB(a5))}function aB(a5){return a5.defaultView||a5.parentWindow}function ao(a5,a6,a8){function a7(bb){var a9=a5.cloneRange();a9.collapse(bb);a9[bb?"setStartBefore":"setEndAfter"](a6);var ba=a9.extractContents();if(a8){ba=F.trim(ba)}F[bb?"insertBefore":"insertAfter"](ba,a6)}a7(true);a7(false)}function Q(a6){var a7=W.image(a6);if(a7){a6.setStartAfter(a7);a6.setEndAfter(a7)}var a5=am(a6);a5.removeAllRanges();a5.addRange(a6)}function N(a5){u.extend(this,{ownerDocument:a5,startContainer:a5,endContainer:a5,commonAncestorContainer:a5,startOffset:0,endOffset:0,collapsed:true})}N.prototype={setStart:function(a5,a6){this.startContainer=a5;this.startOffset=a6;x(this);w(this,true)},setEnd:function(a5,a6){this.endContainer=a5;this.endOffset=a6;x(this);w(this,false)},setStartBefore:function(a5){this.setStart(a5.parentNode,q(a5))},setStartAfter:function(a5){this.setStart(a5.parentNode,q(a5)+1)},setEndBefore:function(a5){this.setEnd(a5.parentNode,q(a5))},setEndAfter:function(a5){this.setEnd(a5.parentNode,q(a5)+1)},selectNode:function(a5){this.setStartBefore(a5);this.setEndAfter(a5)},selectNodeContents:function(a5){this.setStart(a5,0);this.setEnd(a5,a5[a5.nodeType===1?"childNodes":"nodeValue"].length)},collapse:function(a5){if(a5){this.setEnd(this.startContainer,this.startOffset)}else{this.setStart(this.endContainer,this.endOffset)}},deleteContents:function(){var a6=this.cloneRange();if(this.startContainer!=this.commonAncestorContainer){this.setStartAfter(aD(this.commonAncestorContainer,this.startContainer))}this.collapse(true);(function a5(a7){while(a7.next()){a7.hasPartialSubtree()?a5(a7.getSubtreeIterator()):a7.remove()}})(new l(a6))},cloneContents:function(){var a5=s(this);return(function a6(a9){for(var a8,a7=a5.createDocumentFragment();a8=a9.next();){a8=a8.cloneNode(!a9.hasPartialSubtree());if(a9.hasPartialSubtree()){a8.appendChild(a6(a9.getSubtreeIterator()))}a7.appendChild(a8)}return a7})(new l(this))},extractContents:function(){var a6=this.cloneRange();if(this.startContainer!=this.commonAncestorContainer){this.setStartAfter(aD(this.commonAncestorContainer,this.startContainer))}this.collapse(true);var a7=this;var a5=s(this);return(function a8(bb){for(var ba,a9=a5.createDocumentFragment();ba=bb.next();){bb.hasPartialSubtree()?ba=ba.cloneNode(false):bb.remove(a7.originalRange);if(bb.hasPartialSubtree()){ba.appendChild(a8(bb.getSubtreeIterator()))}a9.appendChild(ba)}return a9})(new l(a6))},insertNode:function(a5){if(ag(this.startContainer)){if(this.startOffset!=this.startContainer.nodeValue.length){ax(this.startContainer,this.startOffset)}F.insertAfter(a5,this.startContainer)}else{F.insertAt(this.startContainer,a5,this.startOffset)}this.setStart(this.startContainer,this.startOffset)},cloneRange:function(){return u.extend(new N(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var a6=this.startContainer.nodeName,a5=this.endContainer.nodeName;return[a6=="#text"?this.startContainer.nodeValue:a6,"(",this.startOffset,") : ",a5=="#text"?this.endContainer.nodeValue:a5,"(",this.endOffset,")"].join("")}};function m(a7,a5,bc,a9){if(a7==a5){return a9-bc}var bb=a5;while(bb&&bb.parentNode!=a7){bb=bb.parentNode}if(bb){return q(bb)-bc}bb=a7;while(bb&&bb.parentNode!=a5){bb=bb.parentNode}if(bb){return a9-q(bb)-1}var ba=F.commonAncestor(a7,a5);var a8=a7;while(a8&&a8.parentNode!=ba){a8=a8.parentNode}if(!a8){a8=ba}var a6=a5;while(a6&&a6.parentNode!=ba){a6=a6.parentNode}if(!a6){a6=ba}if(a8==a6){return 0}return q(a6)-q(a8)}function w(a6,a7){function a5(a9){try{return m(a9.startContainer,a9.endContainer,a9.startOffset,a9.endOffset)<0}catch(a8){return true}}if(a5(a6)){if(a7){a6.commonAncestorContainer=a6.endContainer=a6.startContainer;a6.endOffset=a6.startOffset}else{a6.commonAncestorContainer=a6.startContainer=a6.endContainer;a6.startOffset=a6.endOffset}a6.collapsed=true}}function x(a6){a6.collapsed=a6.startContainer==a6.endContainer&&a6.startOffset==a6.endOffset;var a5=a6.startContainer;while(a5&&a5!=a6.endContainer&&!y(a5,a6.endContainer)){a5=a5.parentNode}a6.commonAncestorContainer=a5}function aT(a5){if(u.browser.msie){return new N(a5)}return a5.createRange()}function l(a6){u.extend(this,{range:a6,_current:null,_next:null,_end:null});if(a6.collapsed){return}var a5=a6.commonAncestorContainer;this._next=a6.startContainer==a5&&!ag(a6.startContainer)?a6.startContainer.childNodes[a6.startOffset]:aD(a5,a6.startContainer);this._end=a6.endContainer==a5&&!ag(a6.endContainer)?a6.endContainer.childNodes[a6.endOffset]:aD(a5,a6.endContainer).nextSibling}l.prototype={hasNext:function(){return !!this._next},next:function(){var a5=this._current=this._next;this._next=this._current&&this._current.nextSibling!=this._end?this._current.nextSibling:null;if(ag(this._current)){if(this.range.endContainer==this._current){(a5=a5.cloneNode(true)).deleteData(this.range.endOffset,a5.length-this.range.endOffset)}if(this.range.startContainer==this._current){(a5=a5.cloneNode(true)).deleteData(0,this.range.startOffset)}}return a5},traverse:function(a6){function a5(){this._current=this._next;this._next=this._current&&this._current.nextSibling!=this._end?this._current.nextSibling:null;return this._current}var a7;while(a7=a5.call(this)){if(this.hasPartialSubtree()){this.getSubtreeIterator().traverse(a6)}else{a6(a7)}}return a7},remove:function(ba){var a9=this.range.startContainer==this._current;var a7=this.range.endContainer==this._current;if(ag(this._current)&&(a9||a7)){var a6=a9?this.range.startOffset:0;var a5=a7?this.range.endOffset:this._current.length;var bc=a5-a6;if(ba&&(a9||a7)){if(this._current==ba.startContainer&&a6<=ba.startOffset){ba.startOffset-=bc}if(this._current==ba.endContainer&&a5<=ba.endOffset){ba.endOffset-=bc}}this._current.deleteData(a6,bc)}else{var bb=this._current.parentNode;if(ba&&(this.range.startContainer==bb||this.range.endContainer==bb)){var a8=q(this._current);if(bb==ba.startContainer&&a8<=ba.startOffset){ba.startOffset-=1}if(bb==ba.endContainer&&a8<ba.endOffset){ba.endOffset-=1}}F.remove(this._current)}},hasPartialSubtree:function(){return !ag(this._current)&&(B(this._current,this.range.startContainer)||B(this._current,this.range.endContainer))},getSubtreeIterator:function(){var a5=this.range.cloneRange();a5.selectNodeContents(this._current);if(B(this._current,this.range.startContainer)){a5.setStart(this.range.startContainer,this.range.startOffset)}if(B(this._current,this.range.endContainer)){a5.setEnd(this.range.endContainer,this.range.endOffset)}return new l(a5)}};function ay(a5){this.ownerDocument=a5;this.rangeCount=1}ay.prototype={addRange:function(a6){var a5=this.ownerDocument.body.createTextRange();h(a5,a6,false);h(a5,a6,true);a5.select()},removeAllRanges:function(){this.ownerDocument.selection.empty()},getRangeAt:function(){var bd,a9=new N(this.ownerDocument),a7=this.ownerDocument.selection,a5;try{bd=a7.createRange();a5=bd.item?bd.item(0):bd.parentElement();if(a5.ownerDocument!=this.ownerDocument){return a9}}catch(ba){return a9}if(a7.type=="Control"){a9.selectNode(bd.item(0))}else{ak(bd,a9,true);ak(bd,a9,false);if(a9.startContainer.nodeType==9){a9.setStart(a9.endContainer,a9.startOffset)}if(a9.endContainer.nodeType==9){a9.setEnd(a9.startContainer,a9.endOffset)}if(bd.compareEndPoints("StartToEnd",bd)==0){a9.collapse(false)}var bb=a9.startContainer,be=a9.endContainer,bc=this.ownerDocument.body;if(!a9.collapsed&&a9.startOffset==0&&a9.endOffset==aJ(a9.endContainer)&&!(bb==be&&ag(bb)&&bb.parentNode==bc)){var a8=false,a6=false;while(q(bb)==0&&bb==bb.parentNode.firstChild&&bb!=bc){bb=bb.parentNode;a8=true}while(q(be)==aJ(be.parentNode)-1&&be==be.parentNode.lastChild&&be!=bc){be=be.parentNode;a6=true}if(bb==bc&&be==bc&&a8&&a6){a9.setStart(bb,0);a9.setEnd(be,aJ(bc))}}}return a9}};function h(bc,a6,a5){var a9=a6[a5?"startContainer":"endContainer"];var ba=a6[a5?"startOffset":"endOffset"],be=0;var a7=ag(a9)?a9:a9.childNodes[ba]||null;var bb=ag(a9)?a9.parentNode:a9;if(a9.nodeType==3||a9.nodeType==4){be=ba}var bd=bb.insertBefore(F.create(a6.ownerDocument,"a"),a7);var a8=a6.ownerDocument.body.createTextRange();a8.moveToElementText(bd);F.remove(bd);a8[a5?"moveStart":"moveEnd"]("character",be);a8.collapse(false);bc.setEndPoint(a5?"StartToStart":"EndToStart",a8)}function ak(ba,a6,a5){var a8=F.create(a6.ownerDocument,"a"),bb=ba.duplicate();bb.collapse(a5);var a7=bb.parentElement();do{a7.insertBefore(a8,a8.previousSibling);bb.moveToElementText(a8)}while(bb.compareEndPoints(a5?"StartToStart":"StartToEnd",ba)>0&&a8.previousSibling);bb.setEndPoint(a5?"EndToStart":"EndToEnd",ba);var a9=a8.nextSibling;if(!a9){a9=a8.previousSibling;if(a9&&ag(a9)){a6.setEnd(a9,a9.nodeValue.length);F.remove(a8)}else{a6.selectNodeContents(a7);F.remove(a8);a6.endOffset-=1}return}F.remove(a8);if(ag(a9)){a6[a5?"setStart":"setEnd"](a9,bb.text.length)}else{a6[a5?"setStartBefore":"setEndBefore"](a9)}}function aP(a5){this.enumerate=function(){var a7=[];function a6(a8){if(F.is(a8,"img")||(a8.nodeType==3&&!F.isWhitespace(a8))){a7.push(a8)}else{a8=a8.firstChild;while(a8){a6(a8);a8=a8.nextSibling}}}new l(a5).traverse(a6);return a7}}function j(a5){return new aP(a5).enumerate()}function k(a9){var a5=[];for(var a6=0,a8=a9.length;a6<a8;a6++){var a7=F.parentOfType(a9[a6],J);if(a7&&u.inArray(a7,a5)<0){a5.push(a7)}}return a5}function aI(a6){var a5=[];new l(a6).traverse(function(a7){if(a7.className=="t-marker"){a5.push(a7)}});return a5}function ap(a7){var ba=s(a7);this.body=ba.body;this.html=this.body.innerHTML;function a9(be){var bc=0,bb=be.nodeType;while(be=be.previousSibling){var bd=be.nodeType;if(bd!=3||bb!=bd){bc++}bb=bd}return bc}function a8(bb,bc){if(bb.nodeType==3){while((bb=bb.previousSibling)&&bb.nodeType==3){bc+=bb.nodeValue.length}}return bc}function a6(bb){var bc=[];while(bb!=ba){bc.push(a9(bb));bb=bb.parentNode}return bc}function a5(bd,bc,bb,be){var bh=ba,bg=bb.length,bf=be;while(bg--){bh=bh.childNodes[bb[bg]]}while(bh.nodeType==3&&bh.nodeValue.length<bf){bf-=bh.nodeValue.length;bh=bh.nextSibling}bd[bc?"setStart":"setEnd"](bh,bf)}this.startContainer=a6(a7.startContainer);this.endContainer=a6(a7.endContainer);this.startOffset=a8(a7.startContainer,a7.startOffset);this.endOffset=a8(a7.endContainer,a7.endOffset);this.toRange=function(){var bb=a7.cloneRange();a5(bb,true,this.startContainer,this.startOffset);a5(bb,false,this.endContainer,this.endOffset);return bb}}function ae(){var a5;this.addCaret=function(a6){a5=F.create(s(a6),"span",{className:"t-marker"});a6.insertNode(a5);a6.selectNode(a5);return a5};this.removeCaret=function(a7){var a9=a5.previousSibling;var bc=0;if(a9){bc=ag(a9)?a9.nodeValue.length:q(a9)}var bb=a5.parentNode;var ba=a9?q(a9):0;F.remove(a5);g(bb);var a6=bb.childNodes[ba];if(ag(a6)){a7.setStart(a6,bc)}else{if(a6){var a8=F.lastTextNode(a6);if(a8){a7.setStart(a8,a8.nodeValue.length)}else{a7[a9?"setStartAfter":"setStartBefore"](a6)}}else{if(!u.browser.msie&&bb.innerHTML==""){bb.innerHTML='<br _moz_dirty="" />'}a7.selectNodeContents(bb)}}a7.collapse(true)};this.add=function(a6,a8){if(a8&&a6.collapsed){this.addCaret(a6);a6=W.expand(a6)}var a7=a6.cloneRange();a7.collapse(false);this.end=F.create(s(a6),"span",{className:"t-marker"});a7.insertNode(this.end);a7=a6.cloneRange();a7.collapse(true);this.start=this.end.cloneNode(true);a7.insertNode(this.start);a6.setStartBefore(this.start);a6.setEndAfter(this.end);g(a6.commonAncestorContainer);return a6};this.remove=function(bd){var a6=this.start,bi=this.end;g(bd.commonAncestorContainer);while(!a6.nextSibling&&a6.parentNode){a6=a6.parentNode}while(!bi.previousSibling&&bi.parentNode){bi=bi.parentNode}var a8=(a6.previousSibling&&a6.previousSibling.nodeType==3)&&(a6.nextSibling&&a6.nextSibling.nodeType==3);var be=(bi.previousSibling&&bi.previousSibling.nodeType==3)&&(bi.nextSibling&&bi.nextSibling.nodeType==3);a6=a6.nextSibling;bi=bi.previousSibling;var bh=false;var bb=false;if(a6==this.end){bb=!!this.start.previousSibling;a6=bi=this.start.previousSibling||this.end.nextSibling;bh=true}F.remove(this.start);F.remove(this.end);if(a6==null||bi==null){bd.selectNodeContents(bd.commonAncestorContainer);bd.collapse(true);return}var bg=bh?ag(a6)?a6.nodeValue.length:a6.childNodes.length:0;var a9=ag(bi)?bi.nodeValue.length:bi.childNodes.length;if(a6.nodeType==3){while(a6.previousSibling&&a6.previousSibling.nodeType==3){a6=a6.previousSibling;bg+=a6.nodeValue.length}}if(bi.nodeType==3){while(bi.previousSibling&&bi.previousSibling.nodeType==3){bi=bi.previousSibling;a9+=bi.nodeValue.length}}var bc=q(a6),bf=a6.parentNode;var ba=q(bi),a7=bi.parentNode;for(var bk=a6;bk.previousSibling;bk=bk.previousSibling){if(bk.nodeType==3&&bk.previousSibling.nodeType==3){bc--}}for(var bj=bi;bj.previousSibling;bj=bj.previousSibling){if(bj.nodeType==3&&bj.previousSibling.nodeType==3){ba--}}g(bf);if(a6.nodeType==3){a6=bf.childNodes[bc]}g(a7);if(bi.nodeType==3){bi=a7.childNodes[ba]}if(bh){if(a6.nodeType==3){bd.setStart(a6,bg)}else{bd[bb?"setStartAfter":"setStartBefore"](a6)}bd.collapse(true)}else{if(a6.nodeType==3){bd.setStart(a6,bg)}else{bd.setStartBefore(a6)}if(bi.nodeType==3){bd.setEnd(bi,a9)}else{bd.setEndAfter(bi)}}if(a5){this.removeCaret(bd)}}}var av=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/;var W={nodes:function(a6){var a5=j(a6);if(!a5.length){a6.selectNodeContents(a6.commonAncestorContainer);a5=j(a6);if(!a5.length){a5=F.significantChildNodes(a6.commonAncestorContainer)}}return a5},image:function(a6){var a5=[];new l(a6).traverse(function(a7){if(F.is(a7,"img")){a5.push(a7)}});if(a5.length==1){return a5[0]}},expand:function(a6){var a7=a6.cloneRange();var ba=a7.startContainer.childNodes[a7.startOffset==0?0:a7.startOffset-1];var bb=a7.endContainer.childNodes[a7.endOffset];if(!ag(ba)||!ag(bb)){return a7}var a8=ba.nodeValue;var a9=bb.nodeValue;if(a8==""||a9==""){return a7}var a5=a8.split("").reverse().join("").search(av);var bc=a9.search(av);if(a5==0||bc==0){return a7}bc=bc==-1?a9.length:bc;a5=a5==-1?0:a8.length-a5;a7.setStart(ba,a5);a7.setEnd(bb,bc);return a7},isExpandable:function(a6){var bb=a6.startContainer;var ba=s(a6);if(bb==ba||bb==ba.body){return false}var a7=a6.cloneRange();var a5=bb.nodeValue;if(!a5){return false}var a8=a5.substring(0,a7.startOffset);var a9=a5.substring(a7.startOffset);var bc=0,bd=0;if(a8!=""){bc=a8.split("").reverse().join("").search(av)}if(a9!=""){bd=a9.search(av)}return bc!=0&&bd!=0}};function c(a6){var a7=new ap(a6.range);var a5=new ae();this.formatter=a6.formatter;this.getRange=function(){return a7.toRange()};this.lockRange=function(a8){return a5.add(this.getRange(),a8)};this.releaseRange=function(a8){a5.remove(a8);Q(a8)};this.undo=function(){a7.body.innerHTML=a7.html;Q(a7.toRange())};this.redo=function(){this.exec()};this.exec=function(){var a8=this.lockRange(true);this.formatter.editor=this.editor;this.formatter.toggle(a8);this.releaseRange(a8)}}function a0(a7,a6){var a5=a7.body;this.redo=function(){a5.innerHTML=a6.html;Q(a6.toRange())};this.undo=function(){a5.innerHTML=a7.html;Q(a7.toRange())}}function v(a5){c.call(this,a5);this.managesUndoRedo=true;this.exec=function(){var a7=this.editor;var a6=a7.getRange();var a8=new ap(a6);a7.clipboard.paste(a5.value||"");a7.undoRedoStack.push(new a0(a8,new ap(a7.getRange())));a7.focus()}}function aV(){Z.call(this);this.command=function(a5){return new v(a5)};this.update=function(a5,a6){a5.data("tSelectBox").close()};this.init=function(a7,a5){var a6=a5.editor;a7.tSelectBox({data:a6.insertHtml,onItemCreate:function(a8){a8.html='<span unselectable="on">'+a8.dataItem.Text+"</span>"},onChange:function(a8){Z.exec(a6,"insertHtml",a8.value)},highlightFirst:false}).find(".t-input").html(a6.localization.insertHtml)}}function T(){var a6=[],a5=-1;this.push=function(a7){a6=a6.slice(0,a5+1);a5=a6.push(a7)-1};this.undo=function(){if(this.canUndo()){a6[a5--].undo()}};this.redo=function(){if(this.canRedo()){a6[++a5].redo()}};this.canUndo=function(){return a5>=0};this.canRedo=function(){return a5!=a6.length-1}}function aU(a5){this.keydown=function(a9){var a8=a5.keyboard;var a6=a8.isTypingKey(a9);if(a6&&!a8.typingInProgress()){var a7=a5.getRange();this.startRestorePoint=new ap(a7);a8.startTyping(u.proxy(function(){a5.selectionRestorePoint=this.endRestorePoint=new ap(a5.getRange());a5.undoRedoStack.push(new a0(this.startRestorePoint,this.endRestorePoint))},this));return true}return false};this.keyup=function(a6){var a7=a5.keyboard;if(a7.typingInProgress()){a7.endTyping();return true}return false}}function C(a6){var a5=false;this.createUndoCommand=function(){this.endRestorePoint=new ap(a6.getRange());a6.undoRedoStack.push(new a0(this.startRestorePoint,this.endRestorePoint));this.startRestorePoint=this.endRestorePoint};this.changed=function(){if(this.startRestorePoint){return this.startRestorePoint.html!=a6.body.innerHTML}return false};this.keydown=function(a7){var a8=a6.keyboard;if(a8.isModifierKey(a7)){if(a8.typingInProgress()){a8.endTyping(true)}this.startRestorePoint=new ap(a6.getRange());return true}if(a8.isSystem(a7)){a5=true;if(this.changed()){a5=false;this.createUndoCommand()}return true}return false};this.keyup=function(a7){if(a5&&this.changed()){a5=false;this.createUndoCommand(a7);return true}return false}}function aK(a6){var a8=false;var bb;var a7;function a5(bc){return(bc>=48&&bc<=90)||(bc>=96&&bc<=111)||(bc>=186&&bc<=192)||(bc>=219&&bc<=222)}this.toolFromShortcut=function(be,bg){var bd=String.fromCharCode(bg.keyCode);for(var bf in be){var bc=be[bf];if((bc.key==bd||bc.key==bg.keyCode)&&!!bc.ctrl==bg.ctrlKey&&!!bc.alt==bg.altKey&&!!bc.shift==bg.shiftKey){return bf}}};this.isTypingKey=function(bd){var bc=bd.keyCode;return(a5(bc)&&!bd.ctrlKey&&!bd.altKey)||bc==32||bc==13||bc==8||(bc==46&&!bd.shiftKey&&!bd.ctrlKey&&!bd.altKey)};this.isModifierKey=function(bd){var bc=bd.keyCode;return(bc==17&&!bd.shiftKey&&!bd.altKey)||(bc==16&&!bd.ctrlKey&&!bd.altKey)||(bc==18&&!bd.ctrlKey&&!bd.shiftKey)};this.isSystem=function(bc){return bc.keyCode==46&&bc.ctrlKey&&!bc.altKey&&!bc.shiftKey};this.startTyping=function(bc){a7=bc;a8=true};function a9(){a8=false;a7()}this.endTyping=function(bc){this.clearTimeout();if(bc){a9()}else{bb=window.setTimeout(a9,1000)}};this.typingInProgress=function(){return a8};this.clearTimeout=function(){window.clearTimeout(bb)};function ba(be,bd){for(var bc=0;bc<a6.length;bc++){if(a6[bc][bd](be)){break}}}this.keydown=function(bc){ba(bc,"keydown")};this.keyup=function(bc){ba(bc,"keyup")}}function aC(a9){var a8=[new f()];function a6(bb){var bc=F.create(a9.document,"div");bc.innerHTML=bb;var ba=a9.document.createDocumentFragment();while(bc.firstChild){ba.appendChild(bc.firstChild)}return ba}function a5(ba){return/<(div|p|ul|ol|table|h[1-6])/i.test(ba)}this.oncut=function(ba){var bb=new ap(a9.getRange());setTimeout(function(){a9.undoRedoStack.push(new a0(bb,new ap(a9.getRange())))})};this.onpaste=function(be){var ba=a9.getRange();var bc=new ap(ba);var bg=F.create(a9.document,"div",{className:"t-paste-container",innerHTML:"\ufeff"});a9.body.appendChild(bg);if(a9.body.createTextRange){be.preventDefault();var bd=a9.createRange();bd.selectNodeContents(bg);a9.selectRange(bd);var bf=a9.body.createTextRange();bf.moveToElementText(bg);u(a9.body).unbind("paste");bf.execCommand("Paste");u(a9.body).bind("paste",arguments.callee)}else{var bb=a9.createRange();bb.selectNodeContents(bg);Q(bb)}setTimeout(function(){Q(ba);F.remove(bg);if(bg.lastChild&&F.is(bg.lastChild,"br")){F.remove(bg.lastChild)}var bh={html:bg.innerHTML};au.trigger(a9.element,"paste",bh);a9.clipboard.paste(bh.html,true);a9.undoRedoStack.push(new a0(bc,new ap(a9.getRange())));X(a9)})};function a7(bb,bd){if(bb){return F.parentOfType(bd,["p","ul","ol"])||bd.parentNode}var ba=bd.parentNode;var bc=bd.ownerDocument.body;if(F.isInline(ba)){while(ba.parentNode!=bc&&!F.isBlock(ba.parentNode)){ba=ba.parentNode}}return ba}this.paste=function(be,bd){var ba,bc;for(ba=0,bc=a8.length;ba<bc;ba++){if(a8[ba].applicable(be)){be=a8[ba].clean(be)}}if(bd){be=be.replace(/(<br>(\s|&nbsp;)*)+(<\/?(div|p|li|col|t))/ig,"$3");be=be.replace(/<(a|span)[^>]*><\/\1>/ig,"")}be=be.replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>");var bb=a5(be);var bi=a9.getRange();bi.deleteContents();if(bi.startContainer==a9.document){bi.selectNodeContents(a9.body)}var bg=new ae();var bk=bg.addCaret(bi);var bj=a7(bb,bk);var bh=false;if(!/body|td/.test(F.name(bj))&&(bb||F.isInline(bj))){bi.selectNode(bk);ao(bi,bj,true);bh=true}var bl=a6(be);if(bl.firstChild&&bl.firstChild.className==="t-paste-container"){var bf=[];for(ba=0,bc=bl.childNodes.length;ba<bc;ba++){bf.push(bl.childNodes[ba].innerHTML)}bl=a6(bf.join("<br />"))}bi.insertNode(bl);bj=a7(bb,bk);if(bh){while(bk.parentNode!=bj){F.unwrap(bk.parentNode)}F.unwrap(bk.parentNode)}g(bi.commonAncestorContainer);bk.style.display="inline";F.scrollTo(bk);bg.removeCaret(bi);Q(bi)}}function f(){var a5=[/<!--(.|\n)*?-->/g,"",/&quot;/g,"'",/mso-[^;"]*;?/ig,"",/<\/?(meta|link|style|o:|v:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:)[^>]*>)?/ig,"",/style=(["|'])\s*\1/g,""];this.applicable=function(a8){return/class="?Mso|style="[^"]*mso-/i.test(a8)};function a6(a8){if(/^[\u2022\u00b7\u00a7\u00d8o]\u00a0+/.test(a8)){return"ul"}if(/^\s*\w+[\.\)]\u00a0{2,}/.test(a8)){return"ol"}}function a7(bl){var bd=F.create(document,"div",{innerHTML:bl});var bk=u(J.join(","),bd);var bf=-1,ba,bj={ul:{},ol:{}},a8=bd;for(var bg=0;bg<bk.length;bg++){var bb=bk[bg];var bl=bb.innerHTML.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g,"\u00a0");var be=a6(bl);if(!be||F.name(bb)!="p"){if(bb.innerHTML==""){F.remove(bb)}else{bj={ul:{},ol:{}};a8=bd;bf=-1}continue}var bh=parseFloat(bb.style.marginLeft||0);var bi=bj[be][bh];if(bh>bf||!bi){bi=F.create(document,be);if(a8==bd){F.insertBefore(bi,bb)}else{a8.appendChild(bi)}bj[be][bh]=bi}if(ba!=be){for(var bc in bj){for(var a9 in bj[bc]){if(u.contains(bi,bj[bc][a9])){delete bj[bc][a9]}}}}F.remove(bb.firstChild);a8=F.create(document,"li",{innerHTML:bb.innerHTML});bi.appendChild(a8);F.remove(bb);bf=bh;ba=be}return bd.innerHTML}this.clean=function(a9){for(var a8=0,ba=a5.length;a8<ba;a8+=2){a9=a9.replace(a5[a8],a5[a8+1])}a9=a7(a9);a9=a9.replace(/\s+class="?[^"\s>]*"?/ig,"");return a9}}function i(a5){function a6(a9){var a7=0;for(var a8=a9.parentNode.firstChild;a8;a8=a8.nextSibling){if(a8!=a9&&a8.className!="t-marker"&&a8.nodeType==1){a7++}}return a7}this.findSuitable=function(a8,a7){if(!a7&&a6(a8)>0){return null}return F.parentOfType(a8,a5[0].tags)};this.findFormat=function(bb){for(var a7=0;a7<a5.length;a7++){var a9=bb;var a8=a5[a7].tags;var ba=a5[a7].attr;if(a9&&F.ofType(a9,a8)&&D(a9,ba)){return a9}while(a9){a9=F.parentOfType(a9,a8);if(a9&&D(a9,ba)){return a9}}}return null};this.isFormatted=function(a7){for(var a8=0;a8<a7.length;a8++){if(this.findFormat(a7[a8])){return true}}return false}}function b(a7,a9){this.finder=new i(a7);var a8=u.extend({},a7[0].attr,a9);var a5=a7[0].tags[0];function a6(ba){return F.wrap(ba,F.create(ba.ownerDocument,a5,a8))}this.activate=function(bb,ba){if(this.finder.isFormatted(ba)){this.split(bb);this.remove(ba)}else{this.apply(ba)}};this.toggle=function(bb){var ba=j(bb);if(ba.length>0){this.activate(bb,ba)}};this.apply=function(bd){var bc=[];for(var ba=0,bb=bd.length;ba<bb;ba++){var bf=bd[ba];var be=this.finder.findSuitable(bf);if(be){F.attr(be,a8)}else{be=a6(bf)}bc.push(be)}this.consolidate(bc)};this.remove=function(bd){for(var ba=0,bc=bd.length;ba<bc;ba++){var bb=this.finder.findFormat(bd[ba]);if(bb){if(a8&&a8.style){F.unstyle(bb,a8.style);if(!bb.style.cssText){F.unwrap(bb)}}else{F.unwrap(bb)}}}};this.split=function(bc){var be=j(bc);if(be.length>0){for(var ba=0,bd=be.length;ba<bd;ba++){var bb=this.finder.findFormat(be[ba]);if(bb){ao(bc,bb,true)}}}};this.consolidate=function(bc){while(bc.length>1){var ba=bc.pop();var bb=bc[bc.length-1];if(ba.previousSibling&&ba.previousSibling.className=="t-marker"){bb.appendChild(ba.previousSibling)}if(ba.tagName==bb.tagName&&ba.previousSibling==bb&&ba.style.cssText==bb.style.cssText){while(ba.firstChild){bb.appendChild(ba.firstChild)}F.remove(ba)}}}}function a4(a6,a5){i.call(this,a6);function a7(bb){var bm=bb.attributes,bj=u.trim;if(!bm){return}for(var ba=0,bh=bm.length;ba<bh;ba++){var bg=bm[ba],bc=bg.nodeName,bi=bg.nodeValue;if(bg.specified&&bc=="style"){var bd=bj(bi||bb.style.cssText).split(";");for(var bk=0,be=bd.length;bk<be;bk++){var bn=bd[bk];if(bn.length){var bf=bn.split(":");var bl=bj(bf[0].toLowerCase()),a9=bj(bf[1]);if(bl!=a5){continue}return bl.indexOf("color")>=0?F.toHex(a9):a9}}}}return}function a8(bd){var be=u(ag(bd)?bd.parentNode:bd);var bc=be.parents().andSelf();for(var ba=0,bb=bc.length;ba<bb;ba++){var a9=a5=="className"?bc[ba].className:a7(bc[ba]);if(a9){return a9}}return"inherit"}this.getFormat=function(bc){var a9=a8(bc[0]);for(var bb=1,ba=bc.length;bb<ba;bb++){if(a9!=a8(bc[bb])){return""}}return a9};this.isFormatted=function(a9){return this.getFormat(a9)!==""}}function H(a6,a7,a5){b.call(this,a6,a7);this.finder=new a4(a6,a5);this.activate=function(a9,ba){this.split(a9);if(a5){var a8=a5.replace(/-([a-z])/,function(bb,bc){return bc.toUpperCase()});this[a7.style[a8]=="inherit"?"remove":"apply"](ba)}else{this.apply(ba)}}}function af(a5){return a5.collapsed&&!W.isExpandable(a5)}function aa(a5){aj.call(this,u.extend(a5,{finder:new i(a5.format),formatter:function(){return new b(a5.format)}}));this.willDelayExecution=af}function aF(a8){Z.call(this,a8);var a7=u.browser.msie?"tSelectBox":"tComboBox",a6=[{tags:["span"]}],a5=new a4(a6,a8.cssAttr);this.command=function(a9){return new aM(u.extend(a9,{formatter:function(){var ba={};ba[a8.domAttr]=a9.value;return new H(a6,{style:ba},a8.cssAttr)}}))};this.willDelayExecution=af;this.update=function(a9,bc,bb){var bd=a9.data(a7);bd.close();var be=bb.getPending(this.name);var ba=(be&&be.params)?be.params.value:a5.getFormat(bc);bd.value(ba)};this.init=function(bc,ba){var bb=ba.editor;bc[a7]({data:bb[a8.name],onChange:function(bd){Z.exec(bb,a8.name,bd.value)},highlightFirst:false});var a9=bc.data(a7);a9.value("inherit");a9.dropDown.onItemCreate=function(bd){bd.html='<span unselectable="on" style="'+a8.cssAttr+": "+bd.dataItem.Value+'">'+bd.dataItem.Text+"</span>"}}}function a2(a6){Z.call(this,a6);var a5=[{tags:aE}];this.update=function(a7){a7.data("tColorPicker").close()};this.command=function(a7){return new aM(u.extend(a7,{formatter:function(){var a8={};a8[a6.domAttr]=a7.value;return new H(a5,{style:a8},a6.cssAttr)}}))};this.willDelayExecution=af;this.init=function(a9,a7){var a8=a7.editor;a9.tColorPicker({selectedColor:"#000000",onChange:function(ba){Z.exec(a8,a6.name,ba.value)}})}}function ad(){Z.call(this);var a6=[{tags:["span"]}],a5=new a4(a6,"className");this.command=function(a7){return new aM(u.extend(a7,{formatter:function(){return new H(a6,{className:a7.value})}}))};this.update=function(a7,a9){var a8=a7.data("tSelectBox");a8.close();a8.value(a5.getFormat(a9))};this.init=function(a9,a7){var a8=a7.editor;a9.tSelectBox({data:a8.style,title:a8.localization.style,onItemCreate:function(ba){var bb=F.inlineStyle(a8.document,"span",{className:ba.dataItem.Value});ba.html='<span unselectable="on" style="display:block;'+bb+'">'+ba.html+"</span>"},onChange:function(ba){Z.exec(a8,"style",ba.value)}})}}function A(a6){function a5(a9,ba){for(var a7=0;a7<ba.length;a7++){var a8=ba[a7];if(a8==null||!B(a9,a8)){return false}}return true}this.findSuitable=function(ba){var a9=[];for(var a7=0;a7<ba.length;a7++){var a8=F.ofType(ba[a7],a6[0].tags)?ba[a7]:F.parentOfType(ba[a7],a6[0].tags);if(!a8){return[]}if(u.inArray(a8,a9)<0){a9.push(a8)}}for(var a7=0;a7<a9.length;a7++){if(a5(a9[a7],a9)){return[a9[a7]]}}return a9};this.findFormat=function(bb){for(var a7=0;a7<a6.length;a7++){var a9=bb;var a8=a6[a7].tags;var ba=a6[a7].attr;while(a9){if(F.ofType(a9,a8)&&D(a9,ba)){return a9}a9=a9.parentNode}}return null};this.getFormat=function(bb){var a9=u.proxy(function(bc){return this.findFormat(ag(bc)?bc.parentNode:bc)},this),a7=a9(bb[0]);if(!a7){return""}for(var ba=1,a8=bb.length;ba<a8;ba++){if(a7!=a9(bb[ba])){return""}}return a7.nodeName.toLowerCase()};this.isFormatted=function(a7){for(var a8=0;a8<a7.length;a8++){if(!this.findFormat(a7[a8])){return false}}return true}}function Y(a6,a8){var a7=new A(a6);function a5(bc,bg,be){var bd=be.length==1?F.blockParentOrBody(be[0]):F.commonAncestor.apply(null,be);if(F.isInline(bd)){bd=F.blockParentOrBody(bd)}var bf=F.significantChildNodes(bd);var bb=q(bf[0]);var bh=F.create(bd.ownerDocument,bc,bg);for(var a9=0;a9<bf.length;a9++){var ba=bf[a9];if(F.isBlock(ba)){F.attr(ba,bg);if(bh.childNodes.length){F.insertBefore(bh,ba);bh=bh.cloneNode(false)}bb=q(ba)+1;continue}bh.appendChild(ba)}if(bh.firstChild){F.insertAt(bd,bh,bb)}}this.apply=function(bd){var bb=F.is(bd[0],"img")?[bd[0]]:a7.findSuitable(bd);var bc=bb.length?U(F.name(bb[0]),a6):a6[0];var a9=bc.tags[0];var be=u.extend({},bc.attr,a8);if(bb.length){for(var ba=0;ba<bb.length;ba++){F.attr(bb[ba],be)}}else{a5(a9,be,bd)}};this.remove=function(bc){for(var a9=0,bb=bc.length;a9<bb;a9++){var ba=a7.findFormat(bc[a9]);if(ba){if(F.ofType(ba,["p","img","li"])){F.unstyle(ba,U(F.name(ba),a6).attr.style)}else{F.unwrap(ba)}}}};this.toggle=function(ba){var a9=W.nodes(ba);if(a7.isFormatted(a9)){this.remove(a9)}else{this.apply(a9)}}}function aw(a5,a7){var a6=new A(a5);this.apply=function(bd){var a9=k(bd);var be=a5[0].tags[0];if(a9.length){for(var a8=0,bc=a9.length;a8<bc;a8++){if(F.is(a9[a8],"li")){var bf=a9[a8].parentNode;var ba=new L(bf.nodeName.toLowerCase(),be);var bb=this.editor.createRange();bb.selectNode(a9[a8]);ba.toggle(bb)}else{F.changeTag(a9[a8],be)}}}else{new Y(a5,a7).apply(bd)}};this.toggle=function(a9){var a8=j(a9);if(!a8.length){a9.selectNodeContents(a9.commonAncestorContainer);a8=j(a9);if(!a8.length){a8=F.significantChildNodes(a9.commonAncestorContainer)}}this.apply(a8)}}function aM(a5){a5.formatter=a5.formatter();c.call(this,a5)}function R(a5){aj.call(this,u.extend(a5,{finder:new A(a5.format),formatter:function(){return new Y(a5.format)}}))}function n(){Z.call(this);var a5=new A([{tags:J}]);this.command=function(a6){return new aM(u.extend(a6,{formatter:function(){return new aw([{tags:[a6.value]}],{})}}))};this.update=function(a6,a8){var a7=a6.data("tSelectBox");a7.close();a7.value(a5.getFormat(a8))};this.init=function(a8,a6){var a7=a6.editor;a8.tSelectBox({data:a7.formatBlock,title:a7.localization.formatBlock,onItemCreate:function(ba){var a9=ba.dataItem.Value;ba.html="<"+a9+' unselectable="on" style="margin: .3em 0;'+F.inlineStyle(a7.document,a9)+'">'+ba.dataItem.Text+"</"+a9+">"},onChange:function(a9){Z.exec(a7,"formatBlock",a9.value)},highlightFirst:false})}}function aW(a5){c.call(this,a5);this.exec=function(){var a8=this.getRange(),bi=s(a8),bc,be,bb,bg=u.browser.msie?"":'<br _moz_dirty="" />',bl,bj,a6,bk,bh,ba="p,h1,h2,h3,h4,h5,h6".split(","),bd=F.parentOfType(a8.startContainer,ba),a9=F.parentOfType(a8.endContainer,ba),a7=(bd&&!a9)||(!bd&&a9);a8.deleteContents();bj=F.create(bi,"a");a8.insertNode(bj);g(bj.parentNode);a6=F.parentOfType(bj,["li"]);bk=F.parentOfType(bj,"h1,h2,h3,h4,h5,h6".split(","));if(a6){bh=a8.cloneRange();bh.selectNode(a6);if(j(bh).length==0){bl=F.create(bi,"p");if(a6.nextSibling){ao(bh,a6.parentNode)}F.insertAfter(bl,a6.parentNode);F.remove(a6.parentNode.childNodes.length==1?a6.parentNode:a6);bl.innerHTML=bg;bb=bl}}else{if(bk&&!bj.nextSibling){bl=F.create(bi,"p");F.insertAfter(bl,bk);bl.innerHTML=bg;F.remove(bj);bb=bl}}if(!bb){if(!(a6||bk)){new Y([{tags:["p"]}]).apply([bj])}a8.selectNode(bj);bc=F.parentOfType(bj,[a6?"li":bk?F.name(bk):"p"]);ao(a8,bc,a7);be=bc.previousSibling;if(F.is(be,"li")&&be.firstChild&&!F.is(be.firstChild,"br")){be=be.firstChild}bb=bc.nextSibling;if(F.is(bb,"li")&&bb.firstChild&&!F.is(bb.firstChild,"br")){bb=bb.firstChild}F.remove(bc);function bf(bm){if(bm.firstChild&&F.is(bm.firstChild,"br")){F.remove(bm.firstChild)}if(ag(bm)&&bm.nodeValue==""){bm=bm.parentNode}if(bm&&!F.is(bm,"img")&&bm.innerHTML==""){bm.innerHTML=bg}}bf(be);bf(bb);g(be)}g(bb);if(F.is(bb,"img")){a8.setStartBefore(bb)}else{a8.selectNodeContents(bb)}a8.collapse(true);F.scrollTo(bb);Q(a8)}}function d(a5){c.call(this,a5);this.exec=function(){var a7=this.getRange();a7.deleteContents();var a6=F.create(s(a7),"br");a7.insertNode(a6);g(a6.parentNode);if(!u.browser.msie&&(!a6.nextSibling||F.isWhitespace(a6.nextSibling))){var a8=a6.cloneNode(true);a8.setAttribute("_moz_dirty","");F.insertAfter(a8,a6)}a7.setStartAfter(a6);a7.collapse(true);Q(a7)}}function ar(a6){var a5=[a6=="ul"?"ol":"ul",a6];A.call(this,[{tags:a5}]);this.isFormatted=function(ba){var a7=[],a8;for(var a9=0;a9<ba.length;a9++){if((a8=this.findFormat(ba[a9]))&&F.name(a8)==a6){a7.push(a8)}}if(a7.length<1){return false}if(a7.length!=ba.length){return false}for(a9=0;a9<a7.length;a9++){if(a7[a9]!=a8){return false}}return true};this.findSuitable=function(a7){var a8=F.parentOfType(a7[0],a5);if(a8&&F.name(a8)==a6){return a8}return null}}function L(a7,a8){var a9=new ar(a7);function a5(bd,bg){var bc=F.create(bd.ownerDocument,"li");for(var be=0;be<bg.length;be++){var bf=bg[be];if(F.is(bf,"li")){bd.appendChild(bf);continue}if(F.is(bf,"td")){while(bf.firstChild){bc.appendChild(bf.firstChild)}bd.appendChild(bc);bf.appendChild(bd);bd=bd.cloneNode(false);bc=bc.cloneNode(false);continue}bc.appendChild(bf);if(F.isBlock(bf)){bd.appendChild(bc);F.unwrap(bf);bc=bc.cloneNode(false)}}if(bc.firstChild){bd.appendChild(bc)}}function ba(bc,be){for(var bd=0;bd<be.length;bd++){if(B(bc,be[bd])){return true}}return false}function a6(bd,be){if(bd.className=="t-marker"){var bc=bd.nextSibling;if(bc&&F.isBlock(bc)){return false}bc=bd.previousSibling;if(bc&&F.isBlock(bc)){return false}}return ba(bd,be)||F.isInline(bd)||bd.nodeType==3}this.split=function(bg){var bh=j(bg);if(bh.length){var be=F.parentOfType(bh[0],["li"]);var bc=F.parentOfType(bh[bh.length-1],["li"]);bg.setStartBefore(be);bg.setEndAfter(bc);for(var bd=0,bf=bh.length;bd<bf;bd++){var bi=a9.findFormat(bh[bd]);if(bi){ao(bg,bi,true)}}}};this.apply=function(bh){var bg=bh.length==1?F.parentOfType(bh[0],["ul","ol"]):F.commonAncestor.apply(null,bh);if(!bg){bg=F.parentOfType(bh[0],["td"])||bh[0].ownerDocument.body}if(F.isInline(bg)){bg=F.blockParentOrBody(bg)}var bj=[];var be=a9.findSuitable(bh);if(!be){be=new ar(a7=="ul"?"ol":"ul").findSuitable(bh)}var bd=F.significantChildNodes(bg);if(/table|tbody/.test(F.name(bg))){bd=u.map(bh,function(bm){return F.parentOfType(bm,["td"])})}for(var bc=0;bc<bd.length;bc++){var bi=bd[bc];var bk=F.name(bi);if(a6(bi,bh)&&(!be||!B(be,bi))){if(be&&(bk=="ul"||bk=="ol")){u.each(bi.childNodes,function(){bj.push(this)});F.remove(bi)}else{bj.push(bi)}}}if(bj.length==bd.length&&bg!=bh[0].ownerDocument.body&&!/table|tbody|tr|td/.test(F.name(bg))){bj=[bg]}if(!be){be=F.create(bg.ownerDocument,a7);F.insertBefore(be,bj[0])}a5(be,bj);if(!F.is(be,a7)){F.changeTag(be,a7)}var bl=be.previousSibling;while(bl&&(bl.className=="t-marker"||(bl.nodeType==3&&F.isWhitespace(bl)))){bl=bl.previousSibling}if(bl&&F.name(bl)==a7){while(be.firstChild){bl.appendChild(be.firstChild)}F.remove(be);be=bl}var bf=be.nextSibling;while(bf&&(bf.className=="t-marker"||(bf.nodeType==3&&F.isWhitespace(bf)))){bf=bf.nextSibling}if(bf&&F.name(bf)==a7){while(be.lastChild){bf.insertBefore(be.lastChild,bf.firstChild)}F.remove(be)}};function bb(bd){var bc=document.createDocumentFragment();for(var be=bd.firstChild;be;be=be.nextSibling){var bg=F.create(bd.ownerDocument,a8||"p");while(be.firstChild){var bf=be.firstChild;if(F.isBlock(bf)){if(bg.firstChild){bc.appendChild(bg);bg=F.create(bd.ownerDocument,a8||"p")}bc.appendChild(bf)}else{bg.appendChild(bf)}}if(bg.firstChild){bc.appendChild(bg)}}F.insertAfter(bc,bd);F.remove(bd)}this.remove=function(bf){var bd;for(var bc=0,be=bf.length;bc<be;bc++){if(bd=a9.findFormat(bf[bc])){bb(bd)}}};this.toggle=function(bd){var bc=j(bd);if(!bc.length){bd.selectNodeContents(bd.commonAncestorContainer);bc=j(bd);if(!bc.length){bc=F.significantChildNodes(bd.commonAncestorContainer)}}if(a9.isFormatted(bc)){this.split(bd);this.remove(bc)}else{this.apply(bc)}}}function p(a5){a5.formatter=new L(a5.tag);c.call(this,a5)}function aQ(a5){aj.call(this,u.extend(a5,{finder:new ar(a5.tag)}));this.command=function(a6){return new p(u.extend(a6,{tag:a5.tag}))}}function K(){this.findSuitable=function(a5){return F.parentOfType(a5,["a"])}}function a1(){this.finder=new K();this.apply=function(a5,bb){var a7=j(a5);if(bb.innerHTML!=undefined){var a8=aI(a5);var a6=s(a5);a5.deleteContents();var a9=F.create(a6,"a",bb);a5.insertNode(a9);if(a8.length>1){F.insertAfter(a8[a8.length-1],a9);F.insertAfter(a8[1],a9);F[a7.length>0?"insertBefore":"insertAfter"](a8[0],a9)}}else{var ba=new b([{tags:["a"]}],bb);ba.finder=this.finder;ba.apply(a7)}}}function aq(a5){a5.formatter={toggle:function(a6){new b([{tags:["a"]}]).remove(j(a6))}};c.call(this,a5)}function ac(a6){c.call(this,a6);var a5;this.async=true;var a7=new a1();this.exec=function(){var bc=this.getRange();var ba=bc.collapsed;bc=this.lockRange(true);var bf=j(bc);var be=null;var a9=this;function bg(bm){var bl=u("#t-editor-link-url",bd.element).val();if(bl&&bl!="http://"){a5={href:bl};var bi=u("#t-editor-link-title",bd.element).val();if(bi){a5.title=bi}var bj=u("#t-editor-link-text",bd.element).val();if(bj!==be){a5.innerHTML=bj}var bk=u("#t-editor-link-target",bd.element).is(":checked");if(bk){a5.target="_blank"}a7.apply(bc,a5)}bb(bm);if(a9.change){a9.change()}}function bb(bi){bi.preventDefault();bd.destroy();aB(s(bc)).focus();a9.releaseRange(bc)}var bh=bf.length?a7.finder.findSuitable(bf[0]):null;var a8=bf.length<=1||(bf.length==2&&ba);var bd=au.window.create(u.extend({},this.editor.dialogOptions,{title:"Insert link",html:new u.telerik.stringBuilder().cat('<div class="t-editor-dialog">').cat("<ol>").cat('<li class="t-form-text-row"><label for="t-editor-link-url">Web address</label><input type="text" class="t-input" id="t-editor-link-url"/></li>').catIf('<li class="t-form-text-row"><label for="t-editor-link-text">Text</label><input type="text" class="t-input" id="t-editor-link-text"/></li>',a8).cat('<li class="t-form-text-row"><label for="t-editor-link-title">Tooltip</label><input type="text" class="t-input" id="t-editor-link-title"/></li>').cat('<li class="t-form-checkbox-row"><input type="checkbox" id="t-editor-link-target"/><label for="t-editor-link-target">Open link in new window</label></li>').cat("</ol>").cat('<div class="t-button-wrapper">').cat('<button class="t-dialog-insert t-button">Insert</button>').cat("&nbsp;or&nbsp;").cat('<a href="#" class="t-dialog-close t-link">Close</a>').cat("</div>").cat("</div>").string(),onClose:bb})).hide().find(".t-dialog-insert").click(bg).end().find(".t-dialog-close").click(bb).end().find(".t-form-text-row input").keydown(function(bi){if(bi.keyCode==13){bg(bi)}else{if(bi.keyCode==27){bb(bi)}}}).end().find("#t-editor-link-url").val(bh?bh.getAttribute("href",2):"http://").end().find("#t-editor-link-text").val(bf.length>0?(bf.length==1?bf[0].nodeValue:bf[0].nodeValue+bf[1].nodeValue):"").end().find("#t-editor-link-title").val(bh?bh.title:"").end().find("#t-editor-link-target").attr("checked",bh?bh.target=="_blank":false).end().show().data("tWindow").center();if(a8&&bf.length>0){be=u("#t-editor-link-text",bd.element).val()}u("#t-editor-link-url",bd.element).focus().select()},this.redo=function(){var a8=this.lockRange(true);a7.apply(a8,a5);this.releaseRange(a8)}}function aX(a6){Z.call(this,u.extend(a6,{command:aq}));var a5=new i([{tags:["a"]}]);this.init=function(a7){a7.attr("unselectable","on").addClass("t-state-disabled")};this.update=function(a7,a8){a7.toggleClass("t-state-disabled",!a5.isFormatted(a8)).removeClass("t-state-hover")}}function aR(a6){c.call(this,a6);this.async=true;var a5;function a7(a8,a9){if(a5.src&&a5.src!="http://"){if(!a8){a8=F.create(s(a9),"img",a5);a8.onload=a8.onerror=function(){a8.removeAttribute("complete");a8.removeAttribute("width");a8.removeAttribute("height")};a9.deleteContents();a9.insertNode(a8);a9.setStartAfter(a8);a9.setEndAfter(a8);Q(a9);return true}else{F.attr(a8,a5)}}return false}this.redo=function(){var a8=this.lockRange();if(!a7(W.image(a8),a8)){this.releaseRange(a8)}};this.exec=function(){var bb=this.lockRange();var a8=false;var be=W.image(bb);var a9=this;function bf(bi){a5={src:u("#t-editor-image-url",bc.element).val(),alt:u("#t-editor-image-title",bc.element).val()};a8=a7(be,bb);ba(bi);if(a9.change){a9.change()}}function ba(bi){bi.preventDefault();bc.destroy();aB(s(bb)).focus();if(!a8){a9.releaseRange(bb)}}var bd=this.editor.fileBrowser;var bg=bd&&bd.selectUrl!==undefined;function bh(){if(bg){new au.imageBrowser(u(this).find(".t-image-browser"),u.extend(bd,{apply:bf,element:a9.editor.element,localization:a9.editor.localization}))}}var bc=au.window.create(u.extend({width:750},this.editor.dialogOptions,{title:"Insert image",html:new u.telerik.stringBuilder().cat('<div class="t-editor-dialog">').catIf('<div class="t-image-browser"></div>',bg).cat("<ol>").cat('<li class="t-form-text-row"><label for="t-editor-image-url">Web address</label><input type="text" class="t-input" id="t-editor-image-url"/></li>').cat('<li class="t-form-text-row"><label for="t-editor-image-title">Tooltip</label><input type="text" class="t-input" id="t-editor-image-title"/></li>').cat("</ol>").cat('<div class="t-button-wrapper">').cat('<button class="t-dialog-insert t-button">Insert</button>').cat("&nbsp;or&nbsp;").cat('<a href="#" class="t-dialog-close t-link">Close</a>').cat("</div>").cat("</div>").string(),onClose:ba,onActivate:bh})).hide().find(".t-dialog-insert").click(bf).end().find(".t-dialog-close").click(ba).end().find(".t-form-text-row input").keydown(function(bi){if(bi.keyCode==13){bf(bi)}else{if(bi.keyCode==27){ba(bi)}}}).end().toggleClass("t-imagebrowser",bg).find("#t-editor-image-url").val(be?be.getAttribute("src",2):"http://").end().find("#t-editor-image-title").val(be?be.alt:"").end().show().data("tWindow").center();u("#t-editor-image-url",bc.element).focus().select()}}au.selectbox=function(a5,a6){var bd;var a7=u(a5).attr("tabIndex",0);var a9=a7.find(".t-input");var ba=this.dropDown=new au.dropDown({effects:au.fx.slide.defaults(),onItemCreate:a6.onItemCreate,onClick:function(be){bc(a6.data[u(be.item).index()].Value);a6.onChange({value:bd})}});function a8(){if(!ba.$items){ba.dataBind(a6.data)}}function bb(be){a9.html(be?be:"&nbsp;")}function bc(bg){a8();var bf=-1;for(var be=0,bh=a6.data.length;be<bh;be++){if(a6.data[be].Value==bg){bf=be;break}}if(bf!=-1){ba.$items.removeClass("t-state-selected").eq(bf).addClass("t-state-selected");bb(u(ba.$items[bf]).text());bd=a6.data[bf].Value}}this.value=function(be){if(be==undefined){return bd}bc(be);if(bd!=be){bb(a6.title||be)}};this.close=function(){ba.close()};bb(a6.title||a9.text());a7.click(function(be){a8();if(ba.isOpened()){ba.close()}else{ba.open({offset:a7.offset(),outerHeight:a7.outerHeight(),outerWidth:a7.outerWidth(),zIndex:au.getElementZIndex(a7[0])})}}).find("*").attr("unselectable","on").end().keydown(function(bi){var bf=bi.keyCode,bg,be,bh;if(bf===40){if(!ba.isOpened()){a7.click()}else{bg=ba.$items.filter(".t-state-selected");if(!bg[0]){bh=ba.$items.first()}else{bh=bg.next()}if(bh[0]){bg.removeClass("t-state-selected");bh.addClass("t-state-selected")}}bi.preventDefault()}else{if(bf===38){if(ba.isOpened()){bg=ba.$items.filter(".t-state-selected");be=bg.prev();if(be[0]){bg.removeClass("t-state-selected");be.addClass("t-state-selected")}}bi.preventDefault()}else{if(bf==13){bg=ba.$items.filter(".t-state-selected");if(bg[0]){bg.click()}bi.preventDefault()}else{if(bi.keyCode==9||bi.keyCode==39||bi.keyCode==37){ba.close()}}}}});if(u.browser.msie){a7.focus(function(){a7.css("outline","1px dotted #000")}).blur(function(){a7.css("outline","")})}ba.$element.css("direction",a7.closest(".t-rtl").length>0?"rtl":"");u(document.documentElement).bind("mousedown",u.proxy(function(bg){var be=ba.$element;var bf=be&&be.parent().length>0;if(bf&&!u.contains(a5,bg.target)&&!u.contains(be.parent()[0],bg.target)){ba.close()}},this))};u.fn.tSelectBox=function(a5){return au.create(this,{name:"tSelectBox",init:function(a6,a7){return new au.selectbox(a6,a7)},options:a5})};u.fn.tSelectBox.defaults={effects:au.fx.slide.defaults()};au.colorpicker=function(a6,a7){var a5=this;a5.element=a6;var a8=u(a6);u.extend(a5,a7);a8.attr("tabIndex",0).click(u.proxy(a5.click,a5)).keydown(function(bd){var bc=a5.popup(),ba,bb,a9;if(bd.keyCode==40){if(!bc.is(":visible")){a5.open()}else{ba=bc.find(".t-state-selected");if(ba[0]){bb=ba.next()}else{bb=bc.find("li:first")}if(bb[0]){ba.removeClass("t-state-selected");bb.addClass("t-state-selected")}}bd.preventDefault()}else{if(bd.keyCode==38){if(bc.is(":visible")){ba=bc.find(".t-state-selected");a9=ba.prev();if(a9[0]){ba.removeClass("t-state-selected");a9.addClass("t-state-selected")}}bd.preventDefault()}else{if(bd.keyCode==9||bd.keyCode==39||bd.keyCode==37){a5.close()}else{if(bd.keyCode==13){bc.find(".t-state-selected").click();bd.preventDefault()}}}}}).find("*").attr("unselectable","on");if(u.browser.msie){a8.focus(function(){a8.css("outline","1px dotted #000")}).blur(function(){a8.css("outline","")})}if(a5.selectedColor){a8.find(".t-selected-color").css("background-color",this.selectedColor)}u(a6.ownerDocument.documentElement).bind("mousedown",u.proxy(function(a9){if(!u(a9.target).closest(".t-colorpicker-popup").length){this.close()}},a5));au.bind(a5,{change:a5.onChange,load:a5.onLoad})};au.colorpicker.prototype={select:function(a5){if(a5){a5=F.toHex(a5);if(!au.trigger(this.element,"change",{value:a5})){this.value(a5);this.close()}}else{au.trigger(this.element,"change",{value:this.selectedColor})}},open:function(){var a5=this.popup();var a8=u(this.element);var a7=a8.offset();a7.top+=a8.outerHeight();if(a8.closest(".t-rtl").length){a7.left-=a5.outerWidth()-a8.outerWidth()}var a6="auto";a8.parents().andSelf().each(function(){a6=u(this).css("zIndex");if(Number(a6)){a6=Number(a6)+1;return false}});au.fx._wrap(a5).css(u.extend({position:"absolute",zIndex:a6},a7));a5.find(".t-item").bind("click",u.proxy(function(ba){var a9=u(ba.currentTarget,ba.target.ownerDocument).find("div").css("background-color");this.select(a9)},this));au.fx.play(this.effects,a5,{direction:"bottom"})},close:function(){if(!this.$popup){return}au.fx.rewind(this.effects,this.$popup,{direction:"bottom"},u.proxy(function(){F.remove(this.$popup[0].parentNode);this.$popup=null},this))},toggle:function(){if(!this.$popup||!this.$popup.is(":visible")){this.open()}else{this.close()}},click:function(a5){if(u(a5.target).closest(".t-tool-icon").length>0){this.select()}else{this.toggle()}},value:function(a5){if(!a5){return this.selectedColor}a5=F.toHex(a5);this.selectedColor=a5;u(".t-selected-color",this.element).css("background-color",a5)},popup:function(){if(!this.$popup){this.$popup=u(au.colorpicker.buildPopup(this)).hide().appendTo(document.body).find("*").attr("unselectable","on").end()}return this.$popup}};u.extend(au.colorpicker,{buildPopup:function(a5){var a8=new au.stringBuilder();a8.cat('<div class="t-popup t-group t-colorpicker-popup">').cat('<ul class="t-reset">');var ba=a5.data;var a7=(a5.value()||"").substring(1);for(var a6=0,a9=ba.length;a6<a9;a6++){a8.cat('<li class="t-item').catIf(" t-state-selected",ba[a6]==a7).cat('"><div style="background-color:#').cat(ba[a6]).cat('"></div></li>')}a8.cat("</ul></div>");return a8.string()}});u.fn.tColorPicker=function(a5){return au.create(this,{name:"tColorPicker",init:function(a6,a7){return new au.colorpicker(a6,a7)},options:a5})};u.fn.tColorPicker.defaults={data:"000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7".split(","),selectedColor:null,effects:au.fx.slide.defaults()};function aZ(){var a6=new A([{tags:J}]);function a5(a7){return a7.style.marginLeft||0}this.apply=function(bc){var ba=a6.findSuitable(bc);if(ba.length){var a9=[];for(var a8=0;a8<ba.length;a8++){if(F.is(ba[a8],"li")){if(u(ba[a8]).index()==0){a9.push(ba[a8].parentNode)}else{if(u.inArray(ba[a8].parentNode,a9)<0){a9.push(ba[a8])}}}else{a9.push(ba[a8])}}while(a9.length){var bd=a9.shift();if(F.is(bd,"li")){var bg=bd.parentNode;var bb=u(bd).prev("li");var bf=bb.find(">ul")[0];if(!bf){bf=F.create(bd.ownerDocument,F.name(bg));bb.append(bf)}while(bd&&bd.parentNode==bg){bf.appendChild(bd);bd=a9.shift()}}else{var a7=parseInt(a5(bd))+30;F.style(bd,{marginLeft:a7})}}}else{var be=new Y([{tags:J}],{style:{marginLeft:30}});be.apply(bc)}};this.remove=function(a9){var bb=a6.findSuitable(a9);for(var a7=0;a7<bb.length;a7++){var a8=u(bb[a7]);if(a8.is("li")){var be=a8.parent();var ba=be.parent();if(ba.is("li,ul,ol")&&!a5(be[0])){var bd=a8.nextAll("li");if(bd.length){u(be[0].cloneNode(false)).appendTo(a8).append(bd)}if(ba.is("li")){a8.insertAfter(ba)}else{a8.appendTo(ba)}if(!be.children("li").length){be.remove()}continue}else{a8=be}}var bc=parseInt(a5(a8[0]))-30;F[bc<=0?"unstyle":"style"](a8[0],{marginLeft:bc})}}}function o(a5){a5.formatter={toggle:function(a6){new aZ().apply(W.nodes(a6))}};c.call(this,a5)}function ab(a5){a5.formatter={toggle:function(a6){new aZ().remove(W.nodes(a6))}};c.call(this,a5)}function ah(){Z.call(this,{command:ab});var a5=new A([{tags:J}]);this.init=function(a6){a6.attr("unselectable","on").addClass("t-state-disabled")};this.update=function(a6,ba){var a8=a5.findSuitable(ba),a9,bb;for(var a7=0;a7<a8.length;a7++){a9=a8[a7].style.marginLeft;if(!a9){bb=u(a8[a7]).parents("ul,ol").length;a9=(F.is(a8[a7],"li")&&(bb>1||a8[a7].parentNode.style.marginLeft))||(F.ofType(a8[a7],["ul","ol"])&&bb>0)}if(a9){a6.removeClass("t-state-disabled");return}}a6.addClass("t-state-disabled").removeClass("t-state-hover")}}function aH(a5){this.editor=a5;this.formats=[]}aH.prototype={apply:function(a9){if(!this.hasPending()){return}var a8=new ae();a8.addCaret(a9);var a5=a9.startContainer.childNodes[a9.startOffset];var bb=a5.previousSibling;if(!bb.nodeValue){bb=bb.previousSibling}a9.setStart(bb,bb.nodeValue.length-1);a8.add(a9);if(j(a9).length==0){a8.remove(a9);a9.collapse(true);this.editor.selectRange(a9);return}var a7=a8.end.previousSibling.previousSibling;var bd,ba=this.formats;for(var a6=0;a6<ba.length;a6++){bd=ba[a6];var bc=bd.command(u.extend({range:a9},bd.params));bc.editor=this.editor;bc.exec();a9.selectNode(a7)}a8.remove(a9);if(a7.parentNode){a9.setStart(a7,1);a9.collapse(true)}this.clear();this.editor.selectRange(a9)},hasPending:function(){return this.formats.length>0},isPending:function(a5){return !!this.getPending(a5)},getPending:function(a6){var a7=this.formats;for(var a5=0;a5<a7.length;a5++){if(a7[a5].name==a6){return a7[a5]}}return},toggle:function(a6){var a7=this.formats;for(var a5=0;a5<a7.length;a5++){if(a7[a5].name==a6.name){if(a7[a5].params&&a7[a5].params.value!=a6.params.value){a7[a5].params.value=a6.params.value}else{a7.splice(a5,1)}return}}a7.push(a6)},clear:function(){this.formats=[]}};function az(a5,ba){a5.hide();var a9=u("<iframe />",{src:'javascript:"<html></html>"',frameBorder:"0"}).css("display","").addClass("t-content").insertBefore(a5)[0];var a6=a9.contentWindow||a9;var a8=a6.document||a9.contentDocument;var a7=a5.val().replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/ig,"$1").replace(/[\r\n\v\f\t ]+/ig," ");if(!a7.length&&u.browser.mozilla){a7='<br _moz_dirty="true" />'}a8.designMode="On";a8.open();a8.write(new au.stringBuilder().cat("<!DOCTYPE html><html><head>").cat('<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />').cat('<style type="text/css">').cat("html,body{padding:0;margin:0;font-family:Verdana,Geneva,sans-serif;background:#fff;}").cat("html{font-size:100%}body{font-size:.75em;line-height:1.5;padding-top:1px;margin-top:-1px;").catIf("direction:rtl;",a5.closest(".t-rtl").length).cat("}").cat("h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}").cat("p{margin:0 0 1em;padding:0 .2em}.t-marker{display:none;}.t-paste-container{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}").cat("ul,ol{padding-left:2.5em}").cat("a{color:#00a}").cat("code{font-size:1.23em}").cat("</style>").cat(u.map(ba,function(bb){return['<link type="text/css" href="',bb,'" rel="stylesheet"/>'].join("")}).join("")).cat('</head><body spellcheck="false">').cat(a7).cat("</body></html>").string());a8.close();return a6}function X(a5){au.trigger(a5.element,"selectionChange")}var r=".t-colorpicker,a.t-tool-icon:not(.t-state-disabled),.t-selectbox, .t-combobox .t-input";function aL(a6){var a5=true;a6.window=az(u(a6.textarea),a6.stylesheets);a6.document=a6.window.contentDocument||a6.window.document;a6.body=a6.document.body;u(a6.document).bind({keydown:function(a9){if(a9.keyCode===121){setTimeout(function(){var ba=u(a6.element).attr("tabIndex");u(a6.element).attr("tabIndex",ba||0).focus().find(r).first().focus();if(!ba&&ba!==0){u(a6.element).removeAttr("tabIndex")}},100);a9.preventDefault();return}var a7=a6.keyboard.toolFromShortcut(a6.tools,a9);if(a7){a9.preventDefault();a6.exec(a7);return false}if(a6.keyboard.isTypingKey(a9)&&a6.pendingFormats.hasPending()){if(a5){a5=false}else{var a8=a6.getRange();a6.pendingFormats.apply(a8);a6.selectRange(a8)}}a6.keyboard.clearTimeout();a6.keyboard.keydown(a9)},keyup:function(a9){var a8=[8,9,33,34,35,36,37,38,39,40,40,45,46];if(u.browser.mozilla&&a9.keyCode==8){aN(a6,a9)}if(u.inArray(a9.keyCode,a8)>-1||(a9.keyCode==65&&a9.ctrlKey&&!a9.altKey&&!a9.shiftKey)){a6.pendingFormats.clear();X(a6)}if(a6.keyboard.isTypingKey(a9)){if(a6.pendingFormats.hasPending()){var a7=a6.getRange();a6.pendingFormats.apply(a7);a6.selectRange(a7)}}else{a5=true}a6.keyboard.keyup(a9)},mousedown:function(a7){a6.pendingFormats.clear();var a8=u(a7.target);if(!u.browser.gecko&&a7.which==2&&a8.is("a[href]")){window.open(a8.attr("href"),"_new")}},mouseup:function(){X(a6)}});u(a6.window).bind("blur",function(){var a7=a6.textarea.value,a8=a6.encodedValue();a6.update(a8);if(a8!=a7){au.trigger(a6.element,"change")}});u(a6.body).bind("cut paste",function(a7){a6.clipboard["on"+a7.type](a7)})}au.editor=function(a5,a6){if(/Mobile.*Safari/.test(navigator.userAgent)){return}var a7=this;this.element=a5;var a8=u(a5);a8.closest("form").bind("submit",function(){a7.update()});u.extend(this,a6);au.bind(this,{load:this.onLoad,selectionChange:this.onSelectionChange,change:this.onChange,execute:this.onExecute,error:this.onError,paste:this.onPaste});for(var bb in this.tools){this.tools[bb].name=bb.toLowerCase()}this.textarea=a8.find("textarea").attr("autocomplete","off")[0];aL(this);this.keyboard=new aK([new aU(this),new C(this)]);this.clipboard=new aC(this);this.pendingFormats=new aH(this);this.undoRedoStack=new T();function bf(bg){var bh=u.grep(bg.className.split(" "),function(bi){return !/^t-(widget|tool-icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(bi)});return bh[0]?bh[0].substring(2):"custom"}function bc(bh,bg){if(!bg.key){return bh}return new au.stringBuilder().cat(bh).cat(" (").catIf("Ctrl + ",bg.ctrl).catIf("Shift + ",bg.shift).catIf("Alt + ",bg.alt).cat(bg.key).cat(")").string()}var ba=".t-editor-toolbar > li > *",a9=".t-editor-button .t-tool-icon",bd=a9+":not(.t-state-disabled)",be=a9+".t-state-disabled";a8.find(".t-combobox .t-input").keydown(function(bi){var bh=u(this).closest(".t-combobox").data("tComboBox"),bg=bi.keyCode;if(bg==39||bg==37){bh.close()}else{if(bg==40){if(!bh.dropDown.isOpened()){bi.stopImmediatePropagation();bh.open()}}}});a8.delegate(bd,"mouseenter",au.hover).delegate(bd,"mouseleave",au.leave).delegate(a9,"mousedown",au.preventDefault).delegate(r,"keydown",function(bg){if(bg.keyCode==39){u(this).closest("li").nextAll("li:has("+r+")").first().find(r).focus()}else{if(bg.keyCode==37){u(this).closest("li").prevAll("li:has("+r+")").last().find(r).focus()}else{if(bg.keyCode==27){a7.focus()}}}}).delegate(bd,"click",au.stopAll(function(bg){a7.exec(bf(this))})).delegate(be,"click",function(bg){bg.preventDefault()}).find(ba).each(function(){var bk=bf(this),bh=a7.tools[bk],bj=a7.localization[bk],bi=u(this);if(!bh){return}if(bk=="fontSize"||bk=="fontName"){var bg=a7.localization[bk+"Inherit"]||aS[bk+"Inherit"];a7[bk][0].Text=bg;bi.find("input").val(bg).end().find("span.t-input").text(bg).end()}bh.init(bi,{title:bc(bj,bh),editor:a7})}).end().bind("selectionChange",function(){var bh=a7.getRange();var bg=j(bh);if(!bg.length){bg=[bh.startContainer]}a8.find(ba).each(function(){var bi=a7.tools[bf(this)];if(bi){bi.update(u(this),bg,a7.pendingFormats)}})});u(document).bind("DOMNodeInserted",function(bg){if(u.contains(bg.target,a7.element)||a7.element==bg.target){a7.textarea.value=a7.value();u(a7.element).find("iframe").remove();aL(a7)}}).bind("mousedown",function(bg){try{if(a7.keyboard.typingInProgress()){a7.keyboard.endTyping(true)}if(!a7.selectionRestorePoint){a7.selectionRestorePoint=new ap(a7.getRange())}}catch(bg){}})};function aN(a5,a8){var a6=a5.getRange(),a9=a6.startContainer;if(a9==a5.body.firstChild||!F.isBlock(a9)||(a9.childNodes.length>0&&!(a9.childNodes.length==1&&F.is(a9.firstChild,"br")))){return}var bb=a9.previousSibling;while(bb&&!F.isBlock(bb)){bb=bb.previousSibling}if(!bb){return}var ba=a5.document.createTreeWalker(bb,NodeFilter.SHOW_TEXT,null,false);var a7;while(a7=ba.nextNode()){bb=a7}a6.setStart(bb,ag(bb)?bb.nodeValue.length:0);a6.collapse(true);Q(a6);F.remove(a9);a8.preventDefault()}u.extend(au.editor,{BlockFormatFinder:A,BlockFormatter:Y,Dom:F,FormatCommand:aM,GenericCommand:a0,GreedyBlockFormatter:aw,GreedyInlineFormatFinder:a4,GreedyInlineFormatter:H,ImageCommand:aR,IndentCommand:o,IndentFormatter:aZ,InlineFormatFinder:i,InlineFormatter:b,InsertHtmlCommand:v,Keyboard:aK,LinkCommand:ac,LinkFormatFinder:K,LinkFormatter:a1,ListCommand:p,ListFormatFinder:ar,ListFormatter:L,MSWordFormatCleaner:f,Marker:ae,NewLineCommand:d,OutdentCommand:ab,ParagraphCommand:aW,PendingFormats:aH,RangeEnumerator:aP,RangeUtils:W,RestorePoint:ap,SystemHandler:C,TypingHandler:aU,UndoRedoStack:T,UnlinkCommand:aq});au.editor.prototype={value:function(a7){var a5=this.body;if(a7===undefined){return E(a5)}this.pendingFormats.clear();a7=a7.replace(/<!\[CDATA\[(.*)?\]\]>/g,"<!--[CDATA[$1]]-->");a7=a7.replace(/<script([^>]*)>(.*)?<\/script>/ig,"<telerik:script $1>$2</telerik:script>");if(u.browser.mozilla){a7=a7.replace(/<p([^>]*)>(\s*)?<\/p>/ig,'<p $1><br _moz_dirty="" /></p>')}if(u.browser.msie&&parseInt(u.browser.version)<9){a7="<br/>"+a7;var a8="originalsrc",a6="originalhref";a7=a7.replace(/href\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,a6+'="$1"');a7=a7.replace(/src\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,a8+'="$1"');a5.innerHTML=a7;F.remove(a5.firstChild);u(a5).find("telerik\\:script,script,link,img,a").each(function(){var a9=this;if(a9[a6]){a9.setAttribute("href",a9[a6]);a9.removeAttribute(a6)}if(a9[a8]){a9.setAttribute("src",a9[a8]);a9.removeAttribute(a8)}})}else{a5.innerHTML=a7;if(u.browser.msie){g(a5)}}this.selectionRestorePoint=null;this.update()},focus:function(){this.window.focus()},update:function(a5){this.textarea.value=a5||this.encoded?this.encodedValue():this.value()},encodedValue:function(){return F.encode(this.value())},createRange:function(a5){return aT(a5||this.document)},getSelection:function(){return a3(this.document)},selectRange:function(a6){this.focus();var a5=this.getSelection();a5.removeAllRanges();a5.addRange(a6)},getRange:function(){var a6=this.getSelection();var a5=a6.rangeCount>0?a6.getRangeAt(0):this.createRange();if(a5.startContainer==this.document&&a5.endContainer==this.document&&a5.startOffset==0&&a5.endOffset==0){a5.setStart(this.body,0);a5.collapse(true)}return a5},selectedHtml:function(){return E(this.getRange().cloneContents())},paste:function(a5){this.clipboard.paste(a5)},exec:function(a9,a5){var a7,a6,a8,bb="";a9=a9.toLowerCase();if(!this.keyboard.typingInProgress()){this.focus();a7=this.getRange();a6=this.document.body}for(a8 in this.tools){if(a8.toLowerCase()==a9){bb=this.tools[a8];break}}if(bb){a7=this.getRange();if(!/undo|redo/i.test(a9)&&bb.willDelayExecution(a7)){this.pendingFormats.toggle({name:a9,params:a5,command:bb.command});X(this);return}var ba=bb.command?bb.command(u.extend({range:a7},a5)):null;au.trigger(this.element,"execute",{name:a9,command:ba});if(/undo|redo/i.test(a9)){this.undoRedoStack[a9]()}else{if(ba){if(!ba.managesUndoRedo){this.undoRedoStack.push(ba)}ba.editor=this;ba.exec();if(ba.async){ba.change=u.proxy(function(){X(this)},this);return}}}X(this)}}};u.fn.tEditor=function(a5){return au.create(this,{name:"tEditor",init:function(a6,a7){return new au.editor(a6,a7)},options:a5})};var al={bold:[{tags:["strong"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}],italic:[{tags:["em"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}],underline:[{tags:["span"],attr:{style:{textDecoration:"underline"}}}],strikethrough:[{tags:["del"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}],justifyLeft:[{tags:J,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{"float":"left"}}}],justifyCenter:[{tags:J,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto"}}}],justifyRight:[{tags:J,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{"float":"right"}}}],justifyFull:[{tags:J,attr:{style:{textAlign:"justify"}}}]};function U(a7,a6){for(var a5=0;a5<a6.length;a5++){if(u.inArray(a7,a6[a5].tags)>=0){return a6[a5]}}}function Z(a5){u.extend(this,a5);this.init=function(a6,a7){a6.attr({unselectable:"on",title:a7.title})};this.command=function(a6){return new a5.command(a6)};this.update=function(){};this.willDelayExecution=function(){return false}}Z.exec=function(a6,a7,a5){a6.exec(a7,{value:a5})};function aj(a5){Z.call(this,a5);this.command=function(a6){return new aM(u.extend(a6,{formatter:a5.formatter}))};this.update=function(a6,ba,a8){var a7=a8.isPending(this.name),a9=a5.finder.isFormatted(ba),bb=a7?!a9:a9;a6.toggleClass("t-state-active",bb)}}var S=function(){return{isFormatted:function(){return false}}};var aS={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertHtml:"Insert HTML",fontName:"Select font family",fontNameInherit:"(inherited font)",fontSize:"Select font size",fontSizeInherit:"(inherited size)",formatBlock:"Format",style:"Styles",emptyFolder:"Empty Folder",uploadFile:"Upload",orderBy:"Arrange by:",orderBySize:"Size",orderByName:"Name",invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',deleteFile:'Are you sure you want to delete "{0}"?',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',directoryNotFound:"A directory with this name was not found."};u.fn.tEditor.defaults={localization:aS,formats:al,encoded:true,stylesheets:[],dialogOptions:{modal:true,resizable:false,draggable:true,effects:{list:[{name:"toggle"}]}},fontName:[{Text:aS.fontNameInherit,Value:"inherit"},{Text:"Arial",Value:"Arial,Helvetica,sans-serif"},{Text:"Courier New",Value:"'Courier New',Courier,monospace"},{Text:"Georgia",Value:"Georgia,serif"},{Text:"Impact",Value:"Impact,Charcoal,sans-serif"},{Text:"Lucida Console",Value:"'Lucida Console',Monaco,monospace"},{Text:"Tahoma",Value:"Tahoma,Geneva,sans-serif"},{Text:"Times New Roman",Value:"'Times New Roman',Times,serif"},{Text:"Trebuchet MS",Value:"'Trebuchet MS',Helvetica,sans-serif"},{Text:"Verdana",Value:"Verdana,Geneva,sans-serif"}],fontSize:[{Text:aS.fontSizeInherit,Value:"inherit"},{Text:"1 (8pt)",Value:"xx-small"},{Text:"2 (10pt)",Value:"x-small"},{Text:"3 (12pt)",Value:"small"},{Text:"4 (14pt)",Value:"medium"},{Text:"5 (18pt)",Value:"large"},{Text:"6 (24pt)",Value:"x-large"},{Text:"7 (36pt)",Value:"xx-large"}],formatBlock:[{Text:"Paragraph",Value:"p"},{Text:"Quotation",Value:"blockquote"},{Text:"Heading 1",Value:"h1"},{Text:"Heading 2",Value:"h2"},{Text:"Heading 3",Value:"h3"},{Text:"Heading 4",Value:"h4"},{Text:"Heading 5",Value:"h5"},{Text:"Heading 6",Value:"h6"}],tools:{bold:new aa({key:"B",ctrl:true,format:al.bold}),italic:new aa({key:"I",ctrl:true,format:al.italic}),underline:new aa({key:"U",ctrl:true,format:al.underline}),strikethrough:new aa({format:al.strikethrough}),undo:{key:"Z",ctrl:true},redo:{key:"Y",ctrl:true},insertLineBreak:new Z({key:13,shift:true,command:d}),insertParagraph:new Z({key:13,command:aW}),justifyCenter:new R({format:al.justifyCenter}),justifyLeft:new R({format:al.justifyLeft}),justifyRight:new R({format:al.justifyRight}),justifyFull:new R({format:al.justifyFull}),insertUnorderedList:new aQ({tag:"ul"}),insertOrderedList:new aQ({tag:"ol"}),createLink:new Z({key:"K",ctrl:true,command:ac}),unlink:new aX({key:"K",ctrl:true,shift:true}),insertImage:new Z({command:aR}),indent:new Z({command:o}),outdent:new ah(),insertHtml:new aV(),style:new ad(),fontName:new aF({cssAttr:"font-family",domAttr:"fontFamily",name:"fontName"}),fontSize:new aF({cssAttr:"font-size",domAttr:"fontSize",name:"fontSize"}),formatBlock:new n(),foreColor:new a2({cssAttr:"color",domAttr:"color",name:"foreColor"}),backColor:new a2({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor"})}}})(jQuery);